#!MANAGED-CONFIG https://raw.githubusercontent.com/caaby/w/surge/c.conf

# ÂÆòÊñπÊâãÂÜå - https://manual.nssurge.com/
# ÁêÜËß£ÂéüÁêÜ - https://manual.nssurge.com/book/understanding-surge/cn/
# Â∏ÆÂä©‰∏≠ÂøÉ - https://nssurge.zendesk.com/
# ÊäÄÊúØÁ§æÂå∫ - https://community.nssurge.com

[General]
# >> Êó•ÂøóÁ≠âÁ∫ß warning, notify, info, verbose (ÈªòËÆ§ÂÄº: notify)
loglevel = warning
# >> TLS Provider: default, secure-transport, network-framework, openssl (ÈªòËÆ§ÂÄº: default)
tls-provider = openssl
# >> GeoIP Êï∞ÊçÆÂ∫ì
geoip-maxmind-url = https://raw.githubusercontent.com/Dreamacro/maxmind-geoip/release/Country.mmdb
# >> Á¶ÅÁî®GeoIPÊï∞ÊçÆÂ∫ìËá™Âä®Êõ¥Êñ∞, false‰∏∫ÂÖÅËÆ∏Ëá™Âä®Êõ¥Êñ∞
disable-geoip-db-auto-update = false
# >> IPv6 ÊîØÊåÅÔºàÈªòËÆ§ÂÖ≥Èó≠
ipv6 = true
# >> ÂÖÅËÆ∏ÁÉ≠ÁÇπÂÖ±‰∫´
allow-hotspot-access = true
# >> Wi-Fi Assist ÂºÄÂêØÊó∂ÔºåÊîØÊåÅ‰ΩøÁî®Êï∞ÊçÆÁΩëÁªúËøõË°åÂêéÂ§á DNS Êü•ËØ¢
wifi-assist = true
# >> ÂÖÅËÆ∏ Wi-Fi ÁΩëÁªú‰∏ãÂÖ∂ÂÆÉËÆæÂ§áËÆøÈóÆ iOSÁ´ØHTTP‰ª£ÁêÜÊúçÂä°Á´ØÂè£ÈªòËÆ§6152 SOCKS5‰ª£ÁêÜÊúçÂä°Á´ØÂè£ÈªòËÆ§6153
allow-wifi-access = true
# >> ÊµãÈÄüË∂ÖÊó∂ÔºàÁßíÔºâ
test-timeout = 3
# >> ÁΩëÁªúÊµãËØï URL
# internet-test-url = http://wifi.vivo.com/generate_204
internet-test-url = http://connectivitycheck.platform.hicloud.com/generate_204
# >> ‰ª£ÁêÜÊµãÈÄü URL
proxy-test-url = http://www.gstatic.com/generate_204

[Proxy Group]
# >> ‰ª£ÁêÜ
proxy = select, hk, taiwan, japan, singapore, usa, vip, fast
# >> +86Ê∏ØÊæ≥Âè∞ÊâãÊú∫Âè∑Á†ÅÁªëÂÆöÁî®Êà∑Ëµ∞directÂç≥ÂèØ GoogleVoiceÁî®Êà∑ÂèØÊ†πÊçÆ‰Ω†WeChatÊúçÂä°Âô®ÊâÄÂú®ÁöÑÂú∞Âå∫Êù•ÈÄâÊã©‰∏çÂêåÁöÑÁ≠ñÁï•„ÄÇ
# >> wechat = select, DIRECT, hk, usa
# >> Â™í‰Ωì
stream = select, hk, japan, singapore, usa, taiwan, vip, fast
# >> final ÊúÄÂêéÈÄâÊã©
# final =  select, proxy, DIRECT
# >> ÁΩëÁªúÂûÉÂúæ ÂπøÂëäÊãíÁªùÊéâ
advertisement = select, REJECT, REJECT-DROP, REJECT-TINYGIF
# >> telegram
# telegram = select, hong kong, ùó¶ùó∂ùóªùó¥ùóÆùóΩùóºùóøùó≤, united states

hk = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, update-interval=43200, policy-regex-filter=(?=.*(Ê∏Ø|Ëè≤|HK|(?i)Hong))^((?!(Âè∞|Êó•|Èü©|Êñ∞|Áæé)).)*$, no-alert=1, hidden=0

taiwan = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, update-interval=43200, policy-regex-filter=(?=.*(Âè∞|TW|(?i)Taiwan))^((?!(Ê∏Ø|Êó•|Èü©|Êñ∞|Áæé)).)*$, no-alert=1, hidden=1

japan = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, update-interval=43200, policy-regex-filter=(?=.*(Êó•|JP|(?i)Japan))^((?!(Ê∏Ø|Âè∞|Èü©|Êñ∞|Áæé)).)*$, no-alert=1, hidden=1

singapore = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, update-interval=43200, policy-regex-filter=(?=.*(Êñ∞|ÁãÆ|ÁçÖ|SG|(?i)Singapore))^((?!(Ê∏Ø|Âè∞|Êó•|Èü©|Áæé)).)*$, no-alert=1, hidden=1

usa = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, update-interval=43200, policy-regex-filter=(?=.*(Áæé|US|(?i)States|American))^((?!(Ê∏Ø|Âè∞|Êó•|Èü©|Êñ∞)).)*$, no-alert=1, hidden=0

netflix = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, update-interval=43200, policy-regex-filter=(Â•àÈ£û|NF|NETFLIX), hidden=0

vip = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, update-interval=43200, policy-regex-filter=VIP2, no-alert=1, hidden=0

fast = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, update-interval=43200, policy-regex-filter = ^((?!Â•óÈ§ê|Ââ©‰Ωô).)*$, no-alert=1, hidden=0

[Rule]
####### <reject ÊãíÁªùÂπøÂëä> #######
# >> Unbreak ÂêéÁª≠ËßÑÂàô‰øÆÊ≠£
RULE-SET, https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, DIRECT
# >> Advertising ÂπøÂëä
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising.list, advertisement
DOMAIN-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_Domain.list, advertisement


####### <direct ‰∏≠ÂõΩÁõ¥Ëøû> #######
# >> Apple ÂõΩÂÜÖÊúçÂä°
# RULE-SET, https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list, DIRECT
# >> China ‰∏≠ÂõΩÁõ¥Ëøû
RULE-SET, https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list, DIRECT
# >> RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaIPs/ChinaIPs.list, DIRECT


####### <proxy ËßÑÂàô‰ª£ÁêÜ> #######
# >> Apple ‰ª£ÁêÜÊúçÂä°
# RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AppleProxy/AppleProxy.list, proxy
# >> wechat
# >> RULE-SET, https://raw.githubusercontent.com/NobyDa/Script/master/Surge/WeChat.list, wechat
# >> spotify
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list, hk
# >> netflix
RULE-SET, https://cdn.jsdelivr.net/gh/DivineEngine/Profiles/Surge/Ruleset/StreamingMedia/Video/Netflix.list, netflix
# >> disney
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Disney/Disney.list, stream
# >> youtube
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list, stream
# >> telegramÊúçÂä°
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram.list, vip
# >> Google
# RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list, usa
# >> ÂõΩÈôÖÊµÅÂ™í‰ΩìÊúçÂä°
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia.list, stream
# >> ÂÖ®ÁêÉÂä†ÈÄü
# RULE-SET, https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list, proxy


# >> ÂΩìÊú¨Âú∞dnsÊúçÂä°Âô®Ëß£ÊûêÂá∫ÁöÑip‰∏∫‰∏≠ÂõΩ ipÊó∂ÔºåÁõ¥Êé•‰ΩøÁî®ËØ•ÁªìÊûúÔºå‰∏çÂú®Áî®ËøúÁ®ãdnsÊúçÂä°Âô®ÈáçÊñ∞Ëß£Êûê
GEOIP, CN, DIRECT, no-resolve
GEOIP, HK, hk, no-resolve
GEOIP, TW, taiwan, no-resolve
GEOIP, SG, singapore, no-resolve
# >> ÂΩìÊú¨Âú∞dnsÊúçÂä°Âô®Ëß£ÊûêÂá∫ÁöÑipÊó∂Ôºå‰ΩøÁî®‰ª£ÁêÜÂêëËøúÁ®ãdnsÊúçÂä°Âô®ÈáçÊñ∞Ëß£ÊûêÂüüÂêç
GEOIP, JP, japan, no-resolve
GEOIP, US, usa, no-resolve

FINAL, DIRECT, dns-failed

[MITM]
enable = true
skip-server-cert-verify = true
# >> MitM ÂÆâË£ÖÂú∞ÂùÄ https://raw.githubusercontent.com/caaby/w/surge/ca.crt
ca-passphrase = MitM
ca-p12 = MIIJaQIBAzCCCS8GCSqGSIb3DQEHAaCCCSAEggkcMIIJGDCCA88GCSqGSIb3DQEHBqCCA8AwggO8AgEAMIIDtQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQImvgNceGVyIgCAggAgIIDiICIVu0ChEwAVOo9+Ivx9nJLS3+h4OZJl4RvbPP5JYuSwlQ8CPM4KBGp48mY485lp3dm3a4xRrVlYYefmqq9hRyQif+w4VYz47iqPIW9lB9LrGvhHlhsNH5qnQUQMHkAO5ugb+Vs9H+P7uldV0mAjWYUznI2y5roAlyA1/Ck2KaGJb9H/+Pd9LqZ5JOKqeHp7MV/FoatBge0WN2QhHUuYDnMh+q4LPRMOqNLni/ajoyPlYzaf+Q5IsRCXHARBsbTd18Bf6N5NbUDZZX/I4y4FxHmvIrqSeGSusIwIWf8hCcWlUWoZOLJr2ZTYjDkC4tH4cTyyeSUMYdDsdPOXO14gJTTAbPrLgAXDLv6dJK1j1ZGIB4zO1bMCk7LefjjUkOUGb7Q2svYlLTwSOraN/BNEwiDNVuOMRvbYU0RdRW4tDzpOzEQ/15YqU1lRE5BGWipT4wpaiPidzdGN+Ehg1Q+6RU7Mmqkw+H6E6iez3MfdH2k1r61h+hq+EbPXIrfKsRDTm9zsFf7EkUyBQhUhuB+ORYB3Tl/B2CwD8auvBpkBaMZHl4l3wxFXV/xcWmXPGn/8ZLNy+Ve8TRlENWvcaedrZalRT0i9qygFWkTz5onLuSfXH6QrknwWXJMLwfA1U2CkjV3N9ZYu4Pvii8LMIrfQrhg3FIsQszilwTxsSqu2FfLjuKyS5Z9Ba5dhsJwUgYwuI9dVG8Me9CHTc1VANqn/TZijjQTZxp5Lq7DZMDeQ16Tgw0zcIFQ0fGg38T17k+OVFNQfLxbUySsMsKnvQT6bIcPyaRY74RyxxQR2I5wy0JMtEfFdVd4AIfGwgWmO3VOgLKqoKkdYdmVfLTon7sAayjPpFz+Lh1CktRcvV1N6LLwsIZkuORgfcTc+LVi8d6oY3s6sCeyeeiZP8+6nlcypD1jcsAF4WJchsOK1N1+s7BIUCOUsYCb8E3gRN7+E8HsvMmK8mCiXeYCvHKVMQq+4GNMgFkmye16HiXWMBbNYQ6ZXTCaRy7HdIztpjxl1xcQYIDteYwv4chFgHbdWKHl7NF0Dgy36+woqti4gZseaG+7g8imNUN6SQK0eyGHoAM6PwESYOdU0YZh8bapB0WHko1v2da7s4la+nJDHAAP6oC1+C0cs2aqoA5M6DumpOxqWgLFsH5JX7k4dzKRuruIXwlURfDbjDODa8p+hJJ6a1wOow/EGj+H9fkwggVBBgkqhkiG9w0BBwGgggUyBIIFLjCCBSowggUmBgsqhkiG9w0BDAoBAqCCBO4wggTqMBwGCiqGSIb3DQEMAQMwDgQINHZBY9RXZPwCAggABIIEyJhsoBBlHkZtkjI213FVfF97AZ8FZqnMm/u+gyPMdrDKR2KyLrFqpwEEVxe7xRBYWtrpmslUXGh68gMdE1c1/UE3Ztih0zA8XkakE0gDITGBEihepDHkS4JZMMm5jmGmf24Avgx4yfujVvjVzDA/SIyXeBDLmmrJ7x+6DpcTEP0Crn+DySchtJBZkbRaQACTqs5w/nDkqu4y404bKTN9GZgreFKNAIzfe+msdN6Fq7pCD8Z/gIgiPe/1+MVLLYlSeCw38h5jXD1rN2zgXgjnvkHoJz3+XoSeziXPOXMcQUVDqs4AhNBLzqloaSSxCKntcpWHEFgBGp0dXaAVT8fkc6/hdtGkaT00PU4c0hemddsmc+iW9vcRDUEGGzRMXrOJwKhtaISMV/bUrIiKd2IDqJt1ArSUqphgA5WAmCwn22JHE0OfdE0veMQ6BfHuc/4DJywolAx0+WjArZ/KpN2j4wogJOrY+TbSzoV1zrQ1DNcQ9EehIjGl1IcHMEstChQLIXKqDbwN5L2EBn1CJvTNAovBNSNC7AbpObd+IzYVoQ3w3wbJGgE3uJNbKhYnYz5SYBHv/HFdD5u1zlDKkO5RTt6KkB3DJ9XK22nbypHSgdl3aWHuRkdbwB79AhgPxh8VBtyQUNByayuAoSWFJHQaxRgeg7QQU2XMX5qf1inofovlWMEh1iRASgCuKznNvf4YvufpcZ3fcJTdaW5Zpk+EnZq5/UeNVuYzQNNsx5o93p0ZrtHYswQzfoz8AiEIIl5PXJqsVnYnCbEVzWowbfzwWUjJsiso7nHDimjdBGSfySIv0QP9ssIemKhiHNa5TStlU+O+dNRUUOpG8x4f7JDpCqvmCUN3LUvjaJ4/knIs41uvElzBvZD32bL9GfcTanFAkY+NWJGifRDzRSg59Rfn0I2kG6ja39bk+BWKdcM6Rf5iKtPDwI8/dIHir55tF/lwBhMcg1a/SgeJ1TjR8dFqy5ny7tAbTh4tRpkkw8Y54Cpmj0Y5U6pkOrxa2VaRklNSHJsRhRvVQGo4/D3YXciv2crO5qNiEHYsla4VQgtCI3P3edJ9FT56mk/ZLEDoBD1DtVVpI0KiY9rgkw2zHFCmOTEGVcm56uzo0qV1/dE6arJy4yG5gQIIWdMS3DfdzAyWTjI1M9po/ZbcqX9ibDpUm8qxJdHRi1aE4EgZy0EsB2MrUyRL1rSQV46lnbAie3xDBqfbc25MdO6PdFhRfFjDvTRmS9wgsanruM1qIOtNV6eQGV5k+jwSyzl0xFtSbD+TPEbPK0iRYSTYjxmyhFGv+m1HnDvYNypiL1HR00YtoFqlOV83qt7CNsz6Wo7fDN77JRvPOzRO3wXCs7S1gCkZRjqIR3zmi1xW971g2zekxdPmdP8gwmqu2Py/bd+tuLGHmI5xiEi8uX1T8nwbGmO9yKEponA4zviTX/rs2ZYcVxLl9kqUz2yHBAUgLoKdvgEwibQzLyBQkCFcKv/3jNNQb2SopIPPvedGr+O+e3BTVssO/JTVTrF1+DA2CljxuSX06MPM776pTn7pnwHemoQs5ZBqOA39wI1MyBseKBsOd3j5YP33Lv19WoPajbthThsSXU66mW/IhMqPOz2RmrljSgLWhSZj+oO2/TElMCMGCSqGSIb3DQEJFTEWBBSQuadoFcS3l4d/oGw4VMlRI7kozjAxMCEwCQYFKw4DAhoFAAQUyD1cvvVbfTU9PhIKkE6WNCO4TDIECP8jOXt87GAtAgIIAA==
hostname = -*.apple.com, -*.icloud.com
